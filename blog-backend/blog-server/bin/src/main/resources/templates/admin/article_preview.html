<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <title th:text="${article.title}">文章预览</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <!-- Markdown样式 -->
    <link href="https://cdn.bootcdn.net/ajax/libs/github-markdown-css/5.1.0/github-markdown.min.css" rel="stylesheet"/>
    <!-- 代码高亮 -->
    <link href="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.7.0/styles/github.min.css" rel="stylesheet"/>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft YaHei", "Helvetica Neue", Arial, sans-serif;
            background: #fff;
            color: #1f1e1e;
        }
        
        .article-container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .article-title {
            font-size: 32px;
            font-weight: 700;
            color: #2f2c2c;
            margin-bottom: 10px;
            line-height: 1.4;
        }
        
        .article-meta {
            color: #2f2c2c;
            font-size: 14px;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .markdown-body {
            font-size: 16px;
            line-height: 1.8;
            background-color: #fff;
            color: #595656 !important;
        }
        
        /* 统一设置所有文本元素为深灰色 */
        .markdown-body p,
        .markdown-body h1,
        .markdown-body h2,
        .markdown-body h3,
        .markdown-body h4,
        .markdown-body h5,
        .markdown-body h6,
        .markdown-body li,
        .markdown-body td,
        .markdown-body th,
        .markdown-body blockquote,
        .markdown-body strong,
        .markdown-body em,
        .markdown-body span,
        .markdown-body div {
            color: #5d5b5b !important;
        }
        
        /* 移除标题下方的横线 */
        .markdown-body h1,
        .markdown-body h2 {
            border-bottom: none !important;
            padding-bottom: 0 !important;
        }

        .markdown-body pre {
            background-color: #f6f8fa !important;
        }
        
        .markdown-body code {
            background-color: #f6f8fa !important;
            color: #2f2c2c !important;
        }
        
        /* 链接颜色保持一定区分度 */
        .markdown-body a {
            color: #0366d6 !important;
        }
        
        .empty-content {
            text-align: center;
            color: #343131;
            padding: 60px 20px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="article-container">
        <!-- 文章标题 -->
        <h1 class="article-title" th:text="${article.title}">文章标题</h1>
        
        <!-- 文章元信息 -->
        <div class="article-meta">
            <span th:if="${article.categoryName != null and !article.categoryName.isEmpty()}">
                分类：<span th:text="${article.categoryName}">分类</span>
            </span>
            <span th:if="${article.categoryName != null and !article.categoryName.isEmpty() and article.createTime != null}"> | </span>
            <span th:if="${article.createTime != null}">
                发布时间：<span th:text="${#temporals.format(article.createTime, 'yyyy-MM-dd HH:mm')}">发布时间</span>
            </span>
        </div>
        
        <!-- 文章内容 -->
        <div class="markdown-body" id="article-content">
            <div class="empty-content" th:if="${article.content == null || article.content.isEmpty()}">
                暂无内容
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <!-- Markdown解析器 -->
    <script src="https://cdn.jsdelivr.net/npm/marked@4.2.12/marked.min.js"></script>
    <!-- 代码高亮 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js" integrity="sha512-bgHRAiTjGrzHzLyKOnpFvaEpGzJet3z4tZnXGjpsCcqOnAH6VGUx9frc5bcIhKTVLEiCO6vEhNAgx5jtLUYrfA==" crossorigin="anonymous"></script>
    
    <script th:inline="javascript">
        $(document).ready(function() {
            var content = /*[[${article.content}]]*/ '';
            
            if (content) {
                // 配置marked
                marked.setOptions({
                    highlight: function(code, lang) {
                        if (lang && hljs.getLanguage(lang)) {
                            try {
                                return hljs.highlight(code, { language: lang }).value;
                            } catch (err) {
                                console.error(err);
                            }
                        }
                        return hljs.highlightAuto(code).value;
                    },
                    breaks: true,
                    gfm: true
                });
                
                // 渲染Markdown
                var html = marked.parse(content);
                $('#article-content').html(html);
                
                // 高亮所有代码块
                $('pre code').each(function(i, block) {
                    hljs.highlightElement(block);
                });
            }
        });
    </script>
</body>
</html>


